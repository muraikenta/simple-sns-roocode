# Cline Rules

このプロジェクトでの開発ルールを記載しています。

## 開発プロセスルール

### 実装の確認粒度

複雑な機能を実装する際は、適切な粒度に分割しながら確認を取りつつ進めてください。これにより、誤解や実装ミスを早期に発見し、修正することができます。

1. まず全体の設計・計画を立てる（Architectモードでの設計時も適切な粒度で確認を取る）
2. 主要なコンポーネントごとに分割して実装する
3. 各ステップで動作確認を行う
4. 全体を統合して最終確認を行う

## コマンド実行ルール

### Git コマンド

git commitする前には原則 git statusで状況を確認してください。これにより、意図しないファイルの変更や、コミットし忘れを防ぐことができます。

```bash
# 正しい手順
git status  # 変更状況を確認
git add .   # 必要なファイルをステージング
git commit -m "コミットメッセージ"
```

### Supabase コマンド

Supabase コマンドは必ず npx 経由で実行してください。
これは、プロジェクトでグローバルインストールされた supabase コマンドに依存せず、常に適切なバージョンの supabase コマンドを使用するためです。

```bash
# 正しい実行方法
npx supabase migration up
```

### Supabase マイグレーション

マイグレーション手順は [Supabaseの宣言的なデータベーススキーマアプローチ](https://supabase.com/docs/guides/local-development/declarative-database-schemas) に従って進めてください。

### Supabase ローカル開発

`supabase link`が必要なコマンド（例：`db push`, `db pull`, `migration repair`など）を実行する場合は、必ず`--local`オプションを付けてください。

```bash
# 正しい実行方法
npx supabase db push --local
npx supabase migration repair --status reverted 20250305 --local
```

